<section id="cursos" class="tab-section active">
  <div class="dashboard-home">
    <div class="charts-stats">
      <div class="section-header d-flex justify-content-between align-items-center mb-3">
        <h2>Gestión de Cursos</h2>
      </div>
      <div>
        <button id="createCursoBtn" class="btn-primary">➕ Nuevo Curso</button>
      </div>
      <div class="button-table-container">
        <div class="card">
          <div class="card-body">
            <table id="cursosSectionTable" class="data-table" style="min-width: 900px;">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Descripción</th>
                  <th>Tipo</th>
                  <th>Precio</th>
                  <th>Carrera</th>
                  <th>Semestre</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                <!-- Aquí se llenarán los datos de los cursos -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div id="modalContainer" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <header class="modal-header">
        <h3 id="modalTitle">Nuevo Curso</h3>
        <button id="modalCloseBtn" aria-label="Cerrar diálogo">&times;</button>
      </header>
      <form id="formCurso" class="modal-body" novalidate>
        <div class="form-group mb-3">
          <label for="nombre">Nombre</label>
          <input type="text" id="nombre" name="nombre" class="form-control" required />
        </div>

        <div class="form-group mb-3">
          <label for="descripcion">Descripción</label>
          <textarea id="descripcion" name="descripcion" class="form-control" rows="3"></textarea>
        </div>

        <div class="form-group mb-3">
          <label for="tipo">Tipo</label>
          <select id="tipo" name="tipo" class="form-control" required>
            <option value="taller" selected>Taller</option>
            <option value="carrera">Carrera</option>
          </select>
        </div>

        <div class="form-group mb-3">
          <label for="precio">Precio</label>
          <input type="number" id="precio" name="precio" class="form-control" min="0" step="0.01" required />
        </div>

        <div class="form-group mb-3" id="carreraGroup" style="display:none;">
          <label for="carreraId">Carrera</label>
          <select id="carreraId" name="carreraId" class="form-control" required>
            <% if (typeof carreras !== 'undefined') { %>
              <% carreras.forEach(function(carrera) { %>
                <option value="<%= carrera._id %>"><%= carrera.nombre %></option>
              <% }); %>
            <% } %>
          </select>
        </div>

        <div class="form-group mb-3" id="semestreGroup" style="display:none;">
          <label for="semestre">Semestre</label>
          <input type="number" id="semestre" name="semestre" class="form-control" min="1" />
        </div>

        <div class="form-group mb-3">
          <button type="button" id="CancelBtn" class="btn-secondary">Cancelar</button>
          <button type="submit" id="SaveBtn" class="btn-primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div id="deleteConfirmModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="deleteModalTitle">
    <div class="modal-content">
      <header class="modal-header">
        <h3 id="deleteModalTitle">Confirmar Eliminación</h3>
        <button id="deleteModalCloseBtn" aria-label="Cerrar diálogo">&times;</button>
      </header>
      <div class="modal-body">
        <p>¿Estás seguro de que deseas eliminar este curso?</p>
        <div class="form-group mb-3">
          <button type="button" id="deleteCancelBtn" class="btn-secondary">Cancelar</button>
          <button type="button" id="deleteConfirmBtn" class="btn-primary">Eliminar</button>
        </div>
      </div>
    </div>
  </div>
</section>
<script src="/assets/js/administrador/cursos.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const tipoSelect = document.getElementById('tipo');
    const carreraGroup = document.getElementById('carreraGroup');
    const semestreGroup = document.getElementById('semestreGroup');

    function toggleCarreraSemestre() {
      if (tipoSelect.value === 'carrera') {
        carreraGroup.style.display = 'block';
        semestreGroup.style.display = 'block';
      } else {
        carreraGroup.style.display = 'none';
        semestreGroup.style.display = 'none';
      }
    }

    tipoSelect.addEventListener('change', toggleCarreraSemestre);

    // Inicializar estado al cargar la página/modal
    toggleCarreraSemestre();
  });
</script>
